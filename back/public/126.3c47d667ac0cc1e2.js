"use strict";(self.webpackChunkfront_e_kaly=self.webpackChunkfront_e_kaly||[]).push([[126],{126:(mt,C,r)=>{r.r(C),r.d(C,{RestaurantModule:()=>ct});var l=r(9808),f=r(4106),d=r(0),t=r(5e3);let A=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-current-orders"]],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"current-orders works!"),t.qZA())},styles:[""]}),e})();var p=r(3075);class Z{constructor(i,n,o){this.name="",this.price=0,this.quantity=0,this._id="",this._id=i,this.name=n,this.price=o}}var u=r(9019),D=r(520),T=r(2891);let g=(()=>{class e{constructor(n,o,s){this.http=n,this.router=o,this.auth=s}getAllDishes(){const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.get(`${u.N.url}/dishes?`,n)}getDish(n){const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.get(`${u.N.url}/dishes/${n}`,o)}updateDish(n){const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.put(`${u.N.url}/dishes/${n._id}`,JSON.stringify(n),o)}deleteDish(n){const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.delete(`${u.N.url}/dishes/${n}`,o)}insertDish(n){const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.post(`${u.N.url}/dishes/`,JSON.stringify({name:n.name,price:n.price}),o)}getAllProfits(){const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.get(`${u.N.url}/orders/amounts?`,n)}getAllCurrOrders(){const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.http.get(`${u.N.url}/orders?status=0`,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(D.eN),t.LFG(d.F0),t.LFG(T.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=r(9224),h=r(7423),v=r(7531);function U(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Modification plat"),t.qZA())}function N(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Nouveau plat"),t.qZA())}const L=function(){return["/restaurant"]};let x=(()=>{class e{constructor(n,o,s,a){this.route=n,this.router=o,this.fb=s,this.restauService=a,this.dishForm=new p.cw({name:new p.NI(""),price:new p.NI("")}),this.id="",this.isUpdate=!1}ngOnInit(){this.route.params.subscribe(n=>{const o=n.id;o&&(this.isUpdate=!0,this.restauService.getDish(o).subscribe({next:s=>{this.id=s._id,this.dishForm.patchValue({name:s.name,price:s.price})},error:s=>console.error(s),complete:()=>console.info("complete")}))})}onSubmit(){const{name:n,price:o}=this.dishForm.value,s=new Z(this.id,n,o);this.isUpdate?this.restauService.updateDish(s).subscribe({next:a=>{console.log(a),this.router.navigateByUrl("/restaurant")},error:a=>console.error(a),complete:()=>console.info("complete")}):this.restauService.insertDish(s).subscribe({next:a=>{console.log(a),this.router.navigateByUrl("/restaurant")},error:a=>console.error(a),complete:()=>console.info("complete")})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(p.qu),t.Y36(g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dish-form"]],decls:24,vars:5,consts:[[1,"dish-form"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["mat-raised-button","",3,"routerLink"],["appearance","standard"],["matInput","","placeholder","nom...","formControlName","name"],["matInput","","type","number","placeholder","prix...","formControlName","price"],["mat-raised-button","","color","primary"],["mat-raised-button",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"mat-card")(3,"mat-card-title"),t.YNc(4,U,2,0,"h2",2),t.YNc(5,N,2,0,"h2",2),t.qZA(),t.TgZ(6,"mat-card-content")(7,"a",3),t._uU(8,"Retour"),t.qZA(),t.TgZ(9,"div")(10,"mat-form-field",4)(11,"mat-label"),t._uU(12,"Nom"),t.qZA(),t._UZ(13,"input",5),t.qZA()(),t.TgZ(14,"div")(15,"mat-form-field",4)(16,"mat-label"),t._uU(17,"Prix"),t.qZA(),t._UZ(18,"input",6),t.qZA()()(),t.TgZ(19,"mat-card-actions")(20,"button",7),t._uU(21,"Valider"),t.qZA(),t.TgZ(22,"button",8),t._uU(23,"Annuler"),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",o.dishForm),t.xp6(3),t.Q6J("ngIf",o.isUpdate),t.xp6(1),t.Q6J("ngIf",!o.isUpdate),t.xp6(2),t.Q6J("routerLink",t.DdM(4,L)))},directives:[p._Y,p.JL,p.sg,m.a8,m.n5,l.O5,m.dn,h.zs,d.yS,f.KE,f.hX,v.Nt,p.Fj,p.JJ,p.u,p.wV,m.hq,h.lW],styles:["button[_ngcontent-%COMP%]{margin:0 7px}@media only screen and (max-width: 600px){.dish-form[_ngcontent-%COMP%]{width:100%;text-align:center;margin:0 auto}}@media only screen and (min-width: 600px){.dish-form[_ngcontent-%COMP%]{width:50%;text-align:center;margin:0 auto}}@media only screen and (min-width: 768px){.dish-form[_ngcontent-%COMP%]{width:30%;text-align:center;margin:0 auto}}@media only screen and (min-width: 992px){.dish-form[_ngcontent-%COMP%]{width:20%;text-align:center;margin:0 auto}}"]}),e})();var _=r(4889),y=r(773),c=r(2781);const b=function(e){return["form/",e]};let w=(()=>{class e{constructor(){this.dish=new Z("","",0),this.delete=new t.vpe,this.modify=new t.vpe}ngOnInit(){}modifyEvent(){this.modify.emit(this.dish)}deleteEvent(){this.delete.emit(this.dish)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dish"]],inputs:{dish:"dish"},outputs:{delete:"delete",modify:"modify"},decls:12,vars:9,consts:[["mat-raised-button","","color","accent",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2),t.ALo(3,"uppercase"),t.qZA(),t.TgZ(4,"mat-card-content"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"mat-card-actions")(8,"a",0),t._uU(9,"Modifier"),t.qZA(),t.TgZ(10,"button",1),t.NdJ("click",function(){return o.deleteEvent()}),t._uU(11,"Supprimer"),t.qZA()()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,o.dish.name)," "),t.xp6(3),t.hij(" Prix: ",t.lcZ(6,5,o.dish.price)," Ar "),t.xp6(3),t.Q6J("routerLink",t.VKq(7,b,o.dish._id)))},directives:[m.a8,m.n5,m.dn,m.hq,h.zs,d.yS,h.lW],pipes:[l.gd,l.JJ],styles:[""]}),e})();function q(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Liste plats"),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Commande en cours"),t.qZA())}function S(e,i){1&e&&t._UZ(0,"mat-progress-spinner",17)}function Y(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Nom "),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function O(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Montant "),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.amount," ")}}function F(e,i){1&e&&t._UZ(0,"tr",20)}function M(e,i){1&e&&t._UZ(0,"tr",21)}const j=function(){return["add"]};function $(e,i){1&e&&(t.TgZ(0,"a",22),t._uU(1,"Ajouter plat"),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,j))}function P(e,i){1&e&&t._UZ(0,"mat-progress-spinner",17)}function k(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"app-dish",25),t.NdJ("modify",function(s){return t.CHM(n),t.oxw(2).modifyDish(s)})("delete",function(s){return t.CHM(n),t.oxw(2).deleteDish(s)}),t.qZA()}2&e&&t.Q6J("dish",i.$implicit)}function B(e,i){if(1&e&&(t.TgZ(0,"div",23),t.YNc(1,k,1,1,"app-dish",24),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.filteredDishes)}}function R(e,i){1&e&&t._UZ(0,"mat-progress-spinner",17)}function z(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Date "),t.qZA())}function E(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.date,"mediumDate")," ")}}function X(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Nom "),t.qZA())}function G(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function H(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Prix "),t.qZA())}function V(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.price)," ")}}function W(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Montant "),t.qZA())}function K(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.amount)," ")}}function tt(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1," Quantit\xe9 "),t.qZA())}function et(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.quantity," ")}}function nt(e,i){1&e&&t._UZ(0,"tr",20)}function it(e,i){1&e&&t._UZ(0,"tr",21)}function ot(e,i){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Commandes en cours"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"table",7),t.ynx(6,26),t.YNc(7,z,2,0,"th",9),t.YNc(8,E,3,4,"td",10),t.BQk(),t.ynx(9,8),t.YNc(10,X,2,0,"th",9),t.YNc(11,G,2,1,"td",10),t.BQk(),t.ynx(12,27),t.YNc(13,H,2,0,"th",9),t.YNc(14,V,3,3,"td",10),t.BQk(),t.ynx(15,11),t.YNc(16,W,2,0,"th",9),t.YNc(17,K,3,3,"td",10),t.BQk(),t.ynx(18,28),t.YNc(19,tt,2,0,"th",9),t.YNc(20,et,2,1,"td",10),t.BQk(),t.YNc(21,nt,1,0,"tr",12),t.YNc(22,it,1,0,"tr",13),t.qZA()()),2&e){const n=t.oxw();t.xp6(4),t.hij("Nombre: ",n.orders.length,""),t.xp6(1),t.Q6J("dataSource",n.orders),t.xp6(16),t.Q6J("matHeaderRowDef",n.ordersColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.ordersColumns)}}const st=[{path:"",component:(()=>{class e{constructor(n,o){this.restauService=n,this.auth=o,this.sidecolor="",this.maincolor="",this.filteredDishes=[],this.loading_1=!1,this.loading_2=!1,this.loading_3=!1,this.profits=[],this.profitsColumns=["name","amount"],this.orders=[],this.ordersColumns=["date","name","price","amount","quantity"],this.isDishes=!0}ngOnInit(){this.loading_1=!0,this.loading_2=!0,this.restauService.getAllDishes().subscribe({next:n=>{this.filteredDishes=n},error:n=>console.error(n),complete:()=>this.loading_1=!1}),this.restauService.getAllProfits().subscribe({next:n=>{this.profits=n},error:n=>console.error(n),complete:()=>this.loading_2=!1}),this.restauService.getAllCurrOrders().subscribe({next:n=>{const o=[];n.forEach(s=>{s.details.forEach(a=>{o.push({name:a.name,price:a.price,amount:a.amount,date:new Date(s.date),status:a.status,quantity:a.quantity})})}),this.orders=Object.assign([],o)},error:n=>console.error(n),complete:()=>console.info("complete")})}modifyDish(n){console.log(n)}deleteDish(n){this.loading_3=!0,this.restauService.deleteDish(n._id).subscribe({next:o=>{this.restauService.getAllDishes().subscribe({next:s=>{this.filteredDishes=s},error:s=>console.error(s),complete:()=>this.loading_3=!1})},error:o=>{},complete:()=>console.info("complete")})}toggleShow(){this.isDishes=!this.isDishes}showDishes(){this.isDishes=!0}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g),t.Y36(T.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-dishes"]],decls:31,vars:16,consts:[[1,"main-container"],["position","start","mode","side","opened","",1,"main-sidenav"],[1,"options"],["flex","50"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["diameter","50","mode","indeterminate",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"main-content"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["class","dishes",4,"ngIf"],["diameter","50","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-raised-button","","color","primary",3,"routerLink"],[1,"dishes"],[3,"dish","modify","delete",4,"ngFor","ngForOf"],[3,"dish","modify","delete"],["matColumnDef","date"],["matColumnDef","price"],["matColumnDef","quantity"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer",1)(2,"div",2)(3,"p",3)(4,"u"),t._uU(5,"Utilisateur:"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"button",4),t.NdJ("click",function(){return o.toggleShow()}),t.YNc(9,q,2,0,"span",5),t.YNc(10,J,2,0,"span",5),t.qZA()(),t.TgZ(11,"div")(12,"h2"),t._uU(13,"Profits par plat"),t.qZA(),t.YNc(14,S,1,0,"mat-progress-spinner",6),t.TgZ(15,"table",7),t.ynx(16,8),t.YNc(17,Y,2,0,"th",9),t.YNc(18,I,2,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,O,2,0,"th",9),t.YNc(21,Q,2,1,"td",10),t.BQk(),t.YNc(22,F,1,0,"tr",12),t.YNc(23,M,1,0,"tr",13),t.qZA()()(),t.TgZ(24,"mat-drawer-content",14)(25,"div"),t.YNc(26,$,2,2,"a",15),t.qZA(),t.YNc(27,P,1,0,"mat-progress-spinner",6),t.YNc(28,B,2,1,"div",16),t.YNc(29,R,1,0,"mat-progress-spinner",6),t.YNc(30,ot,23,4,"div",5),t.qZA()()),2&n&&(t.xp6(1),t.Udp("background",o.sidecolor),t.xp6(5),t.hij(" ",o.auth.name(),""),t.xp6(3),t.Q6J("ngIf",!o.isDishes),t.xp6(1),t.Q6J("ngIf",o.isDishes),t.xp6(4),t.Q6J("ngIf",o.loading_2),t.xp6(1),t.Q6J("dataSource",o.profits),t.xp6(7),t.Q6J("matHeaderRowDef",o.profitsColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.profitsColumns),t.xp6(1),t.Udp("background",o.maincolor),t.xp6(2),t.Q6J("ngIf",o.isDishes),t.xp6(1),t.Q6J("ngIf",o.loading_3),t.xp6(1),t.Q6J("ngIf",o.isDishes),t.xp6(1),t.Q6J("ngIf",o.loading_1),t.xp6(1),t.Q6J("ngIf",!o.isDishes))},directives:[_.kh,_.jA,h.lW,l.O5,y.Ou,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk,_.LW,h.zs,d.yS,l.sg,w],pipes:[l.uU,l.JJ],styles:[".dishes[_ngcontent-%COMP%]{display:flex;gap:17px;flex-wrap:wrap;padding:17px 0}.options[_ngcontent-%COMP%]{display:flex;margin-bottom:17px}.main-sidenav[_ngcontent-%COMP%]{width:35%;padding:7px}.mat-drawer-container[_ngcontent-%COMP%]{height:100%}.main-content[_ngcontent-%COMP%]{padding:7px}table[_ngcontent-%COMP%]{width:100%}"]}),e})()},{path:"profits",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profits"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"div")},styles:[""]}),e})()},{path:"form/:id",component:x},{path:"add",component:x},{path:"current",component:A}];let rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:f.o2,useValue:{appearance:"fill"}}],imports:[[d.Bz.forChild(st)],d.Bz]}),e})();var at=r(3954),pt=r(5245);let ct=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[p.qu,g],imports:[[l.ez,rt,m.QW,at.N6,h.ot,_.SJ,f.lN,v.c,pt.Ps,p.UX,D.JF,c.p0,y.Cq]]}),e})()}}]);